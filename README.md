# üöÄ WMS Service - Warehouse Management System

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–ª–∞–¥–æ–º —Å –∞–¥—Ä–µ—Å–Ω—ã–º —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–∞ –±–∞–∑–µ FastAPI –∏ PostgreSQL.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

WMS Service –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è:
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –ª–æ–∫–∞—Ü–∏–π —Å–∫–ª–∞–¥–∞ (–∑–æ–Ω—ã, —Å—Ç–µ–ª–ª–∞–∂–∏, —Å–µ–∫—Ü–∏–∏, —è—Ä—É—Å—ã, —è—á–µ–π–∫–∏)
- ‚úÖ –£—á—ë—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–ø–∞–ª–ª–µ—Ç—ã, –∫–æ—Ä–æ–±–∫–∏) —Å QR-–∫–æ–¥–∞–º–∏
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –ª–æ–∫–∞—Ü–∏—è–º
- ‚úÖ –í–µ–¥–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π (Event Sourcing)
- ‚úÖ –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç—á—ë—Ç–æ–≤

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **FastAPI** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **asyncpg** - –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä PostgreSQL
- **PostgreSQL 16** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å LTREE –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏–π
- **Pydantic v2** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
wms-service/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/v1/              # API endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ endpoints/       # –†–æ—É—Ç–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dependencies.py  # DI
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ router.py        # –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ core/                # –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/         # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ enums.py         # Enum —Ç–∏–ø—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exceptions.py    # –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/      # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/  # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queries/       # SQL –∑–∞–ø—Ä–æ—Å—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ connection.py  # asyncpg pool
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ external/          # –í–Ω–µ—à–Ω–∏–µ API
‚îÇ   ‚îú‚îÄ‚îÄ middleware/          # Middleware
‚îÇ   ‚îú‚îÄ‚îÄ shared/              # –û–±—â–∏–π –∫–æ–¥
‚îÇ   ‚îî‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ migrations/              # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ scripts/                 # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ docs/                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ pyproject.toml           # Poetry dependencies
‚îî‚îÄ‚îÄ README.md
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- Python 3.11+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- Poetry (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone <your-repo-url>
cd wms-service
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–æ—Ç–æ–≤—ã –¥–ª—è Docker).

### 3. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (PostgreSQL + API)
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f app

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

### 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

**–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º API –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ö–µ–º—ã –ë–î.

```bash
# –í–æ–π—Ç–∏ –≤ PostgreSQL
docker-compose exec db psql -U wms_user -d wms_db

# –ò–ª–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é –∏–∑ –ø–∞–ø–∫–∏ migrations/
```

### 5. –î–æ—Å—Ç—É–ø –∫ API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å–∞–º:

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **Health Check**: http://localhost:8000/health

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ú–æ–¥—É–ª–∏

#### 1. –õ–æ–∫–∞—Ü–∏–∏ (`/api/locations`)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/api/locations` | –°–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞—Ü–∏—é |
| GET | `/api/locations/{id}` | –ü–æ–ª—É—á–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é –ø–æ ID |
| GET | `/api/locations/by-code/{code}` | –ü–æ–ª—É—á–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é –ø–æ –∫–æ–¥—É |
| GET | `/api/locations/{id}/children` | –ü–æ–ª—É—á–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ |
| PUT | `/api/locations/{id}` | –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é |
| PATCH | `/api/locations/{id}/deactivate` | –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞—Ü–∏—é |
| GET | `/api/locations/find-available` | –ù–∞–π—Ç–∏ —Å–≤–æ–±–æ–¥–Ω—É—é —è—á–µ–π–∫—É |

#### 2. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (`/api/containers`) - TODO

TODO: –ë—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ Claude Code

#### 3. –û—Å—Ç–∞—Ç–∫–∏ (`/api/inventory`) - TODO

TODO: –ë—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ Claude Code

#### 4. –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏—è (`/api/movements`) - TODO

TODO: –ë—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ Claude Code

#### 5. –û—Ç—á—ë—Ç—ã (`/api/reports`) - TODO

TODO: –ë—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ Claude Code

#### 6. –°–∏—Å—Ç–µ–º–Ω—ã–µ (`/api/system`) - TODO

TODO: –ë—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ Claude Code

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–±–µ–∑ Docker)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
poetry install

# –ó–∞–ø—É—Å–∫ PostgreSQL —á–µ—Ä–µ–∑ Docker
docker-compose up db -d

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
poetry run uvicorn app.main:app --reload --port 8000
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (Makefile)

```bash
make help          # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
make up            # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
make down          # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
make logs          # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make shell         # –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make db-shell      # –í–æ–π—Ç–∏ –≤ PostgreSQL
make format        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ (black)
make lint          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ (ruff)
make test          # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
make rebuild       # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

```bash
# Black
poetry run black app/

# Ruff
poetry run ruff check app/
```

### –¢–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
poetry run pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
poetry run pytest --cov=app
```

## üì¶ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ö–µ–º—É `wms` –≤ PostgreSQL:

- **locations** - –∏–µ—Ä–∞—Ä—Ö–∏—è –ª–æ–∫–∞—Ü–∏–π (—Å LTREE)
- **containers** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å QR-–∫–æ–¥–∞–º–∏
- **container_contents** - —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **inventory** - —Ç–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏
- **movements** - –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π (Event Sourcing)
- **inventory_snapshots** - —Å–Ω–∏–º–∫–∏ –æ—Å—Ç–∞—Ç–∫–æ–≤

### –ú–∏–≥—Ä–∞—Ü–∏–∏

SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `migrations/`.

–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é:

```bash
docker-compose exec db psql -U wms_user -d wms_db -f /docker-entrypoint-initdb.d/001_initial_schema.sql
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–¥–ª—è Claude Code)

### –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ:
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–ë–î, middleware, config)
- ‚úÖ –ü–û–õ–ù–´–ô –º–æ–¥—É–ª—å Locations (–≤—Å–µ 7 endpoints)
- ‚úÖ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

1. **–ú–æ–¥—É–ª—å Containers** (7 endpoints)
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ QR
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
   - –í—Å–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
   - –ò—Å—Ç–æ—Ä–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
   - –°–ø–∏—Å–æ–∫ –≤ –ª–æ–∫–∞—Ü–∏–∏

2. **–ú–æ–¥—É–ª—å Inventory** (7 endpoints)
   - –û—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–∞
   - –û—Å—Ç–∞—Ç–∫–∏ –≤ –ª–æ–∫–∞—Ü–∏–∏
   - –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –°–Ω—è—Ç–∏–µ —Ä–µ–∑–µ—Ä–≤–∞
   - –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞
   - –°–ø–∏—Å–∞–Ω–∏–µ
   - –û–±—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫

3. **–ú–æ–¥—É–ª—å Movements** (2 endpoints)
   - –°–æ–∑–¥–∞—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ
   - –ò—Å—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏–π

4. **–ú–æ–¥—É–ª—å Reports** (7 endpoints)
   - –û—Ç—á—ë—Ç –ø–æ –∑–æ–Ω–∞–º
   - –¢–æ–ø —Ç–æ–≤–∞—Ä–æ–≤
   - ABC-–∞–Ω–∞–ª–∏–∑
   - –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å
   - –û—Ç—á—ë—Ç –ø–æ –ø–∞—Ä—Ç–∏—è–º
   - FIFO/FEFO
   - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

5. **–ú–æ–¥—É–ª—å System** (2 endpoints)
   - –ü–µ—Ä–µ—Å—á—ë—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤
   - –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Claude Code

–°–º. —Ñ–∞–π–ª `docs/CLAUDE_CODE_INSTRUCTIONS.md` (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω–æ)

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## üë• –ê–≤—Ç–æ—Ä—ã

Your Team

## ü§ù –í–∫–ª–∞–¥

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!

---

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞:** 2026-02-09
